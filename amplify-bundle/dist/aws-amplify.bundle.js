/*! For license information please see aws-amplify.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}e.r(t),e.d(t,{Amplify:()=>Xt});var o,i,r=function e(t,o){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=n({},o,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in r)r[a]&&(s+="; "+a,!0!==r[a]&&(s+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(o[a]=t.read(s,a),e===a)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){i(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class s{constructor(e={}){const{path:t,domain:n,expires:o,sameSite:i,secure:r}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?o:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||r,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){r.set(e,t,this.getData())}async getItem(e){return r.get(e)??null}async removeItem(e){r.remove(e,this.getData())}async clear(){const e=r.get(),t=Object.keys(e).map((e=>this.removeItem(e)));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"}(o||(o={}));class a extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:o,metadata:i}){if(super(e),this.name=t,this.underlyingError=o,this.recoverySuggestion=n,i){const{extendedRequestId:e,httpStatusCode:t,requestId:n}=i;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=a,Object.setPrototypeOf(this,a.prototype)}}class c extends a{constructor(){super({name:o.PlatformNotSupported,message:"Function not supported on current platform"})}}class u{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new c;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new c;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new c;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new c;this.storage.clear()}}!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(i||(i={}));const d={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class h{constructor(e,t=i.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let n=this.level;if(h.LOG_LEVEL&&(n=h.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL),!(d[e]>=d[n]))return;let o=console.log.bind(console);e===i.ERROR&&console.error&&(o=console.error.bind(console)),e===i.WARN&&console.warn&&(o=console.warn.bind(console)),h.BIND_ALL_LOG_LEVELS&&(e===i.INFO&&console.info&&(o=console.info.bind(console)),e===i.DEBUG&&console.debug&&(o=console.debug.bind(console)));const r=`[${e}] ${this._ts()} ${this.name}`;let s="";if(1===t.length&&"string"==typeof t[0])s=`${r} - ${t[0]}`,o(s);else if(1===t.length)s=`${r} ${t[0]}`,o(r,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),s=`${r} - ${t[0]} ${e}`,o(`${r} - ${t[0]}`,e)}else s=`${r} ${t}`,o(r,t);for(const e of this._pluggables){const t={message:s,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(i.INFO,...e)}info(...e){this._log(i.INFO,...e)}warn(...e){this._log(i.WARN,...e)}error(...e){this._log(i.ERROR,...e)}debug(...e){this._log(i.DEBUG,...e)}verbose(...e){this._log(i.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}h.LOG_LEVEL=null,h.BIND_ALL_LOG_LEVELS=!1;class l{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const g=new h("CoreStorageUtils"),f=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return g.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new l}};class p{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new c;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}const y=new class extends u{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){g.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new l})())}},m=(new class extends u{constructor(){super(f())}},new class extends p{constructor(){super(f())}},new u(new l),"undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default"),I=new h("Hub");class w{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const n=this.listeners.get(e);n?this.listeners.set(e,[...n.filter((({callback:e})=>e!==t))]):I.warn(`No listeners for ${e}`)}dispatch(e,t,n,o){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&(o===m||I.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const i={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){I.error(e)}}listen(e,t,n="noname"){let o;if("function"!=typeof t)throw new a({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});o=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:n,callback:o}),()=>{this._remove(e,o)}}_toListeners(e){const{channel:t,payload:n}=e,o=this.listeners.get(t);o&&o.forEach((o=>{I.debug(`Dispatching to ${t} with `,n);try{o.callback(e)}catch(e){I.error(e)}}))}}const S=new w("__default__"),v=(new w("internal-hub"),e=>{const t=Reflect.ownKeys(e);for(const n of t){const t=e[n];(t&&"object"==typeof t||"function"==typeof t)&&v(t)}return Object.freeze(e)}),A=Symbol("oauth-listener"),_=new h("parseAWSExports"),C={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},k=e=>e?.split(",")??[],b=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:i})=>({domain:e,scopes:t,redirectSignIn:k(n),redirectSignOut:k(o),responseType:i}),E=e=>e.map((e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}));const P={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function T(e){return P[e]}const O={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function R(e=[]){return e.reduce(((e,t)=>(void 0!==O[t]&&e.push(O[t]),e)),[])}function x(e){const t={};return e.forEach((({name:e,bucket_name:n,aws_region:o,paths:i})=>{if(e in t)throw new Error(`Duplicate friendly name found: ${e}. Name must be unique.`);const r=i?Object.entries(i).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=n),e)),{}):void 0;t[e]={bucketName:n,region:o,paths:r}})),t}const K=e=>Object.keys(e).some((e=>e.startsWith("aws_")))?((e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new a({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:i,aws_bots_config:r,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:h,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:g,aws_cognito_social_providers:f,aws_cognito_username_attributes:p,aws_mandatory_sign_in:y,aws_mobile_analytics_app_id:m,aws_mobile_analytics_app_region:I,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:S,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:v,aws_user_pools_id:A,aws_user_pools_web_client_id:k,geo:P,oauth:T,predictions:O,aws_cloud_logic_custom:R,Notifications:x,modelIntrospection:K}=e,U={};m&&(U.Analytics={Pinpoint:{appId:m,region:I}});const{InAppMessaging:N,Push:L}=x??{};if(N?.AWSPinpoint||L?.AWSPinpoint){if(N?.AWSPinpoint){const{appId:e,region:t}=N.AWSPinpoint;U.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(L?.AWSPinpoint){const{appId:e,region:t}=L.AWSPinpoint;U.Notifications={...U.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(r)&&(U.Interactions={LexV1:Object.fromEntries(r.map((e=>[e.name,e])))}),o){const e=C[n];e||_.debug(`Invalid authentication type ${n}. Falling back to IAM.`),U.API={GraphQL:{endpoint:o,apiKey:t,region:i,defaultAuthMode:e??"iam"}},K&&(U.API.GraphQL.modelIntrospection=K)}const D=u?{status:u&&u.toLowerCase(),totpEnabled:d?.includes("TOTP")??!1,smsEnabled:d?.includes("SMS")??!1}:void 0,M=h?{minLength:h.passwordPolicyMinLength,requireLowercase:h.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:h.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:h.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:h.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,V=Array.from(new Set([...l??[],...g??[]])).reduce(((e,t)=>({...e,[t.toLowerCase()]:{required:!0}})),{}),G=p?.includes("EMAIL")??!1,$=p?.includes("PHONE_NUMBER")??!1;(s||A)&&(U.Auth={Cognito:{identityPoolId:s,allowGuestAccess:"enable"!==y,signUpVerificationMethod:c,userAttributes:V,userPoolClientId:k,userPoolId:A,mfa:D,passwordFormat:M,loginWith:{username:!(G||$),email:G,phone:$}}});const j=!!T&&Object.keys(T).length>0,W=!!f&&f.length>0;if(U.Auth&&j&&(U.Auth.Cognito.loginWith={...U.Auth.Cognito.loginWith,oauth:{...b(T),...W&&{providers:E(f)}}}),w&&(U.Storage={S3:{bucket:w,region:S,dangerouslyConnectToHttpEndpointForTesting:v}}),P){const{amazon_location_service:e}=P;U.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(R&&(U.API={...U.API,REST:R.reduce(((e,t)=>{const{name:n,endpoint:o,region:i,service:r}=t;return{...e,[n]:{endpoint:o,...r?{service:r}:void 0,...i?{region:i}:void 0}}}),{})}),O){const{VoiceId:e}=O?.convert?.speechGenerator?.defaults??{};U.Predictions=e?{...O,convert:{...O.convert,speechGenerator:{...O.convert.speechGenerator,defaults:{voiceId:e}}}}:O}return U})(e):function(e){const{version:t}=e;return!!t&&t.startsWith("1")}(e)?function(e){const t={};if(e.storage&&(t.Storage=function(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:o}=e;return{S3:{bucket:t,region:n,buckets:o&&x(o)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:o,password_policy:i,mfa_configuration:r,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:d,groups:h}=e,l={Cognito:{userPoolId:t,userPoolClientId:n,groups:h}};return o&&(l.Cognito={...l.Cognito,identityPoolId:o}),i&&(l.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),r&&(l.Cognito.mfa={status:(g=r,"OPTIONAL"===g?"optional":"REQUIRED"===g?"on":"off"),smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(l.Cognito.allowGuestAccess=a),c&&(l.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:R(c.identity_providers)}}),u&&(l.Cognito.loginWith={...l.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),d&&(l.Cognito.userAttributes=d.reduce(((e,t)=>({...e,[t]:{required:!0}})),{})),l;var g}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:o,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:o}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:o,api_key:i,model_introspection:r}=e;return{GraphQL:{endpoint:o,defaultAuthMode:T(n),region:t,apiKey:i,modelIntrospection:r}}}(e.data)),e.custom){const n=function(e){if(!e?.events)return;const{url:t,aws_region:n,api_key:o,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:T(i),region:n,apiKey:o}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:o}=e,i=n.includes("IN_APP_MESSAGING"),r=n.includes("APNS")||n.includes("FCM");if(!i&&!r)return;const s={};return i&&(s.InAppMessaging={Pinpoint:{appId:o,region:t}}),r&&(s.PushNotification={Pinpoint:{appId:o,region:t}}),s}(e.notifications)),t}(e):e;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var U=64,N=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),L=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],D=Math.pow(2,53)-1,M=function(){function e(){this.state=Int32Array.from(L),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>D)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===U&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%U>=56){for(var o=this.bufferLength;o<U;o++)t.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(o=this.bufferLength;o<56;o++)t.setUint8(o,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(o=0;o<8;o++)i[4*o]=this.state[o]>>>24&255,i[4*o+1]=this.state[o]>>>16&255,i[4*o+2]=this.state[o]>>>8&255,i[4*o+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],o=t[1],i=t[2],r=t[3],s=t[4],a=t[5],c=t[6],u=t[7],d=0;d<U;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var h=this.temp[d-2],l=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,g=((h=this.temp[d-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[d]=(l+this.temp[d-7]|0)+(g+this.temp[d-16]|0)}var f=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&c)|0)+(u+(N[d]+this.temp[d]|0)|0)|0,p=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&o^n&i^o&i)|0;u=c,c=a,a=s,s=r+f|0,r=i,i=o,o=n,n=f+p|0}t[0]+=n,t[1]+=o,t[2]+=i,t[3]+=r,t[4]+=s,t[5]+=a,t[6]+=c,t[7]+=u},e}(),V="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function G(e){return e instanceof Uint8Array?e:"string"==typeof e?V(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}!function(){function e(e){this.secret=e,this.hash=new M,this.reset()}e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(G(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return e=this,t=void 0,o=function(){return function(e,t){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(e){return[2,this.digestSync()]}))},new((n=void 0)||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}));var e,t,n,o},e.prototype.reset=function(){if(this.hash=new M,this.secret){this.outer=new M;var e=function(e){var t=G(e);if(t.byteLength>U){var n=new M;n.update(t),t=n.digest()}var o=new Uint8Array(U);return o.set(t),o}(this.secret),t=new Uint8Array(U);t.set(e);for(var n=0;n<U;n++)e[n]^=54,t[n]^=92;for(this.hash.update(e),this.outer.update(t),n=0;n<e.byteLength;n++)e[n]=0}}}();const $={},j={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),$[e]=t,j[t]=e}class W{configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,n;const o=await this.getTokens(e);return o?(n=o.accessToken?.payload?.sub,t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:o,authenticated:!0,forceRefresh:e.forceRefresh}))):t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:o,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await(this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId())}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}const q=new class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new W}configure(e,t){const n=K(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=v(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),S.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",m),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[A](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},F=e=>{const{headers:t,statusCode:n}=e;return{...B(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},B=e=>"object"==typeof e?.$metadata,z=async e=>{if(!e||e.statusCode<300)return;const t=await H(e),n=(e=>{const[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),o=t.message??t.Message??"Unknown error",i=new Error(o);return Object.assign(i,{name:n,$metadata:F(e)})},H=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:F(e)})},J=(e,t,n,o)=>async(i,r)=>{const s={...o,...i},a=await s.endpointResolver(s,r),c=await t(r,a),u=await e(c,{...s});return n(u)},Q={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Y={partitions:[Q,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},X=e=>{const{partitions:t}=Y;for(const{regions:n,outputs:o,regionRegex:i}of t){const t=new RegExp(i);if(n.includes(e)||t.test(e))return o.dnsSuffix}return Q.outputs.dnsSuffix},Z="amz-sdk-invocation-id",ee=3e5,te=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,o;const i=new Promise((t=>{o=t,n=setTimeout(t,e)}));return t?.addEventListener("abort",(function e(i){clearTimeout(n),t?.removeEventListener("abort",e),o()})),i},ne=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},oe={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ie;const re=new Uint8Array(16);function se(){if(!ie&&(ie="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ie(re)}const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));const ce=function(e,t,n){if(oe.randomUUID&&!t&&!e)return oe.randomUUID();const o=(e=e||{}).random||(e.rng||se)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]}(o)},ue=(e,t)=>(n,o)=>{const i={};let r=t=>e(t,o);for(let e=t.length-1;e>=0;e--)r=(0,t[e])(o)(r,i);return r(n)},de=e=>{let t;return()=>(t||(t=e()),t)},he=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),le=ue((async({url:e,method:t,headers:n,body:i},{abortSignal:r,cache:s,withCrossDomainCredentials:c})=>{let u;try{u=await fetch(e,{method:t,headers:n,body:he(t)?i:void 0,signal:r,cache:s,credentials:c?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new a({name:o.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}const d={};return u.headers?.forEach(((e,t)=>{d[t.toLowerCase()]=e})),{statusCode:u.status,headers:d,body:null,body:Object.assign(u.body??{},{text:de((()=>u.text())),blob:de((()=>u.blob())),json:de((()=>u.json()))})}}),[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(o){if(0===t.trim().length)return await n(o);{const i=e.toLowerCase();return o.headers[i]=o.headers[i]?`${o.headers[i]} ${t}`:t,await n(o)}},()=>e=>async function(t){return t.headers[Z]||(t.headers[Z]=ce()),e(t)},({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,r)=>async function(s){let a,c,u=r.attemptsCount??0;const d=()=>{if(c)return ne(c,u),c;throw ne(a,u),a};for(;!o?.aborted&&u<e;){try{c=await i(s),a=void 0}catch(e){a=e,c=void 0}u=(r.attemptsCount??0)>u?r.attemptsCount??0:u+1,r.attemptsCount=u;const{isCredentialsExpiredError:h,retryable:l}=await t(c,a,r);if(!l)return d();if(r.isCredentialsExpired=!!h,!o?.aborted&&u<e){const e=n(u);await te(e,o)}}if(o?.aborted)throw new Error("Request aborted.");return d()}},({maxAttempts:e=3})=>(t,n)=>async function(o){const i=n.attemptsCount??0;return o.headers["amz-sdk-request"]=`attempt=${i+1}; max=${e}`,t(o)}]),ge=e=>{const t=function(e=3e5){return t=>{const n=2**t*100+100*Math.random();return!(n>e)&&n}}(ee),n=t(e);return!1===n?ee:n},fe=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],pe=e=>async(t,n)=>{const o=n??await e(t)??void 0,i=o?.code||o?.name,r=t?.statusCode;return{retryable:we(n)||Ie(r,i)||(e=>!!e&&fe.includes(e))(i)||Se(r,i)}},ye=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],me=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ie=(e,t)=>429===e||!!t&&ye.includes(t),we=e=>[o.NetworkError,"ERR_NETWORK"].includes(e?.name),Se=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&me.includes(t),ve=URL;var Ae,_e,Ce,ke,be,Ee,Pe,Te,Oe,Re,xe,Ke,Ue,Ne;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(Ae||(Ae={})),function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(_e||(_e={})),function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"}(Ce||(Ce={})),function(e){e.Record="1",e.IdentifyUser="2"}(ke||(ke={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(be||(be={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"}(Ee||(Ee={})),function(e){e.Subscribe="1",e.GraphQl="2"}(Pe||(Pe={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(Te||(Te={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(Oe||(Oe={})),function(e){e.None="0"}(Re||(Re={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(xe||(xe={})),function(e){e.Subscribe="1"}(Ke||(Ke={})),function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(Ue||(Ue={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"}(Ne||(Ne={}));const Le="6.14.4",De=()=>"undefined"!=typeof global,Me=()=>"undefined"!=typeof window,Ve=()=>"undefined"!=typeof document,Ge=()=>"undefined"!=typeof process,$e=(e,t)=>!!Object.keys(e).find((e=>e.startsWith(t))),je=[{platform:Ae.Expo,detectionMethod:function(){return De()&&void 0!==global.expo}},{platform:Ae.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:Ae.NextJs,detectionMethod:function(){return Me()&&window.next&&"object"==typeof window.next}},{platform:Ae.Nuxt,detectionMethod:function(){return Me()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:Ae.Angular,detectionMethod:function(){const e=Boolean(Ve()&&document.querySelector("[ng-version]")),t=Boolean(Me()&&void 0!==window.ng);return e||t}},{platform:Ae.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Ve()&&Array.from(document.querySelectorAll("[id]")).some((t=>Object.keys(t).find(e)))}},{platform:Ae.VueJs,detectionMethod:function(){return Me()&&$e(window,"__VUE")}},{platform:Ae.Svelte,detectionMethod:function(){return Me()&&$e(window,"__SVELTE")}},{platform:Ae.WebUnknown,detectionMethod:function(){return Me()}},{platform:Ae.NextJsSSR,detectionMethod:function(){return De()&&($e(global,"__next")||$e(global,"__NEXT"))}},{platform:Ae.NuxtSSR,detectionMethod:function(){return De()&&void 0!==global.__NUXT_PATHS__}},{platform:Ae.ReactSSR,detectionMethod:function(){return Ge()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("react")))}},{platform:Ae.VueJsSSR,detectionMethod:function(){return De()&&$e(global,"__VUE")}},{platform:Ae.AngularSSR,detectionMethod:function(){return Ge()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:Ae.SvelteSSR,detectionMethod:function(){return Ge()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("svelte")))}}];let We;const qe=[];let Fe=!1;const Be=()=>{if(!We){if(We=je.find((e=>e.detectionMethod()))?.platform||Ae.ServerSideUnknown,Fe)for(;qe.length;)qe.pop()?.();else qe.forEach((e=>{e()}));He(Ae.ServerSideUnknown,10),He(Ae.WebUnknown,10)}return We},ze=e=>{Fe||qe.push(e)};function He(e,t){We!==e||Fe||setTimeout((()=>{We=void 0,Fe=!0,setTimeout(Be,1e3)}),t)}const Je={},Qe="aws-amplify",Ye=e=>e.replace(/\+.*/,"");new class{constructor(){this.userAgent=`${Qe}/${Ye(Le)}`}get framework(){return Be()}get isReactNative(){return this.framework===Ae.ReactNative||this.framework===Ae.Expo}observeFrameworkChanges(e){ze(e)}};const Xe=e=>(({category:e,action:t}={})=>{const n=[[Qe,Ye(Le)]];if(e&&n.push([e,t]),n.push(["framework",Be()]),e&&t){const o=((e,t)=>Je[e]?.[t]?.additionalDetails)(e,t);o&&o.forEach((e=>{n.push(e)}))}return n})(e).map((([e,t])=>e&&t?`${e}/${t}`:e)).join(" "),Ze=ue(le,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),et={service:"cognito-identity",endpointResolver:({region:e})=>({url:new ve(`https://cognito-identity.${e}.${X(e)}`)}),retryDecider:pe(z),computeDelay:ge,userAgentValue:Xe(),cache:"no-store"};ze((()=>{et.userAgentValue=Xe()}));const tt=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),nt=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),ot=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:o&&new Date(1e3*o)}),it=J(Ze,((e,t)=>{const n=tt("GetCredentialsForIdentity"),o=JSON.stringify(e);return nt(t,n,o)}),(async e=>{if(e.statusCode>=300)throw await z(e);{const t=await H(e);return{IdentityId:t.IdentityId,Credentials:ot(t.Credentials),$metadata:F(e)}}}),et),rt={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new a({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(n)}},st=(e,t=a)=>(n,o,i)=>{const{message:r,recoverySuggestion:s}=e[o];if(!n)throw new t({name:o,message:i?`${r} ${i}`:r,recoverySuggestion:s})};var at,ct;(ct=at||(at={})).AuthTokenConfigException="AuthTokenConfigException",ct.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",ct.AuthUserPoolException="AuthUserPoolException",ct.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",ct.OAuthNotConfigureException="OAuthNotConfigureException";const ut=st({[at.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[at.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[at.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[at.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[at.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});function dt(e){let t=!0;t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,ut(t,at.AuthUserPoolException)}function ht(e){ut(!!e?.identityPoolId,at.InvalidIdentityPoolIdException)}function lt(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(rt.convert(n).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return{toString:()=>e,payload:JSON.parse(o)}}catch(e){throw new Error("Invalid token payload")}}class gt extends a{constructor(e){super(e),this.constructor=gt,Object.setPrototypeOf(this,gt.prototype)}}function ft(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new gt({name:o.Unknown,message:"An unknown error has occurred.",underlyingError:e})}function pt(e){if(!e||!e.includes(":"))throw new gt({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const yt="UserUnAuthenticatedException";new gt({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new gt({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),new gt({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),new gt({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const mt=new gt({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),It=new gt({name:yt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});const wt={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function St(e){return e?.accessToken||e?.idToken}const vt=J(Ze,((e,t)=>{const n=tt("GetId"),o=JSON.stringify(e);return nt(t,n,o)}),(async e=>{if(e.statusCode>=300)throw await z(e);return{IdentityId:(await H(e)).IdentityId,$metadata:F(e)}}),et);function At(e){const t=lt(e).payload.iss,n={};if(!t)throw new gt({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}const _t=new h("CognitoCredentialsProvider"),Ct=3e6;class kt{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){_t.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){_t.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,{tokens:n}=e,{authConfig:o}=e;try{ht(o?.Cognito)}catch{return}if(!t&&!o.Cognito.allowGuestAccess)return;const{forceRefresh:i}=e,r=this.hasTokenChanged(n),s=await async function({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const o=await n.loadIdentityId();if(o)return o.id;const i=e?.idToken?At(e.idToken.toString()):{},r=await async function(e,t){const n=t?.identityPoolId,o=pt(n);let i;try{i=(await vt({region:o},{IdentityPoolId:n,Logins:e})).IdentityId}catch(e){throw ft(e),new gt(e)}if(!i)throw new gt({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}(i,t);return n.storeIdentityId({id:r,type:e?"primary":"guest"}),r}({tokens:n,authConfig:o.Cognito,identityIdStore:this._identityIdStore});return(i||r)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new gt({name:yt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(n),this.credsForOIDCTokens(o.Cognito,n,s)):this.getGuestCredentials(s,o.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return _t.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=pt(t.identityPoolId);let o;try{o=await it({region:n},{IdentityId:e})}catch(e){throw ft(e),new gt(e)}if(o?.Credentials?.AccessKeyId&&o?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+Ct;const t={credentials:{accessKeyId:o.Credentials.AccessKeyId,secretAccessKey:o.Credentials.SecretKey,sessionToken:o.Credentials.SessionToken,expiration:o.Credentials.Expiration},identityId:e};return o.IdentityId&&(t.identityId=o.IdentityId,this._identityIdStore.storeIdentityId({id:o.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new gt({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return _t.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=t.idToken?At(t.idToken.toString()):{},i=pt(e.identityPoolId);let r;try{r=await it({region:i},{IdentityId:n,Logins:o})}catch(e){throw ft(e),new gt(e)}if(r?.Credentials?.AccessKeyId&&r?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+Ct;const e={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:n};return r.IdentityId&&(e.identityId=r.IdentityId,this._identityIdStore.storeIdentityId({id:r.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new gt({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}const bt={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var Et;!function(e){e.InvalidAuthTokens="InvalidAuthTokens"}(Et||(Et={}));const Pt=st({[Et.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}}),Tt="CognitoIdentityServiceProvider";class Ot{getKeyValueStorage(){if(!this.keyValueStorage)throw new gt({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new gt({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const n=lt(t),o=await this.getKeyValueStorage().getItem(e.idToken),i=o?lt(o):void 0,r=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,s=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(s),c=await this.getKeyValueStorage().getItem(e.signInDetails),u={accessToken:n,idToken:i,refreshToken:r,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(u.signInDetails=JSON.parse(c)),u}catch(e){return null}}async storeTokens(e){Pt(void 0!==e,Et.InvalidAuthTokens);const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),o=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i&&o&&n?{deviceKey:n,deviceGroupKey:o,randomPassword:i}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){dt(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return Rt(Tt,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){dt(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${Tt}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){const{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){const{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}const Rt=(e,t)=>xt(bt)(`${e}`,t);function xt(e){const t=Object.values({...e});return(e,n)=>t.reduce(((t,o)=>({...t,[o]:`${e}.${n}.${o}`})),{})}const Kt={identityId:"identityId"},Ut=new h("DefaultIdentityIdStore");class Nt{setAuthConfig(e){ht(e.Cognito),this.authConfig=e,this._authKeys=Lt("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){ht(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?(this._hasGuestIdentityId=!0,{id:e,type:"guest"}):null}}catch(e){return Ut.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){ht(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const Lt=(e,t)=>xt(Kt)(`com.amplify.${e}`,t),Dt=new kt(new Nt(y)),Mt=ue(le,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Vt="cognito-idp",Gt={service:Vt,retryDecider:pe(z),computeDelay:ge,userAgentValue:Xe(),cache:"no-store"},$t=({endpointOverride:e})=>t=>e?{url:new ve(e)}:(({region:e})=>({url:new ve(`https://${Vt}.${e}.${X(e)}`)}))(t),jt=(e=>{let t;return async(...n)=>t||(t=new Promise(((o,i)=>{e(...n).then((e=>{o(e)})).catch((e=>{i(e)})).finally((()=>{t=void 0}))})),t)})((async({tokens:e,authConfig:t,username:n})=>{dt(t?.Cognito);const{userPoolId:o,userPoolClientId:i,userPoolEndpoint:r}=t.Cognito,s=function(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new gt({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}(o);!function(e){if(function(e){return St(e)&&!e?.refreshToken}(e))throw mt;if(!function(e){return St(e)&&e?.refreshToken}(e))throw It}(e);const a=e.refreshToken,c={REFRESH_TOKEN:a};e.deviceMetadata?.deviceKey&&(c.DEVICE_KEY=e.deviceMetadata.deviceKey);const u=function({username:e,userPoolId:t,userPoolClientId:n}){if("undefined"==typeof window)return;const o=window.AmazonCognitoAdvancedSecurityData;if(void 0===o)return;const i=o.getData(e,t,n);return i?{EncodedData:i}:{}}({username:n,userPoolId:o,userPoolClientId:i}),d=(p={endpointResolver:$t({endpointOverride:r})},J(Mt,((e,t)=>(({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}))(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityProviderService.InitiateAuth"},JSON.stringify(e))),(async e=>{if(e.statusCode>=300){const t=await z(e);throw ft(t),new gt({name:t.name,message:t.message,metadata:t.$metadata})}return H(e)}),{...Gt,...p})),{AuthenticationResult:h}=await d({region:s},{ClientId:i,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:c,UserContextData:u}),l=lt(h?.AccessToken??""),g=h?.IdToken?lt(h.IdToken):void 0,{iat:f}=l.payload;var p;if(!f)throw new gt({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:l,idToken:g,clockDrift:1e3*f-(new Date).getTime(),refreshToken:a,username:n}}));function Wt({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}const qt="amplify-signin-with-hostedUI",Ft="CognitoIdentityServiceProvider",Bt=(e,t)=>xt(wt)(e,t),zt=new class{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(qt),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){dt(this.cognitoConfig);const t=Bt(Ft,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){dt(this.cognitoConfig);const t=Bt(Ft,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(e.inflightOAuth)}async storeOAuthInFlight(e){dt(this.cognitoConfig);const t=Bt(Ft,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){dt(this.cognitoConfig);const e=Bt(Ft,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(qt),[n,o]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===o}}async storeOAuthSignIn(e,t=!1){dt(this.cognitoConfig);const n=Bt(Ft,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}(y),Ht=[];class Jt{constructor(){this.waitForInflightOAuth="undefined"!=typeof window&&void 0!==window.document?async()=>{if(await zt.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise(((e,t)=>{var n;n=e,Ht.push(n)}))),this.inflightPromise}:async()=>{}}setAuthConfig(e){zt.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new gt({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new gt({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{dt(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();const n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const o=!!t?.idToken&&Wt({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),i=Wt({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||o||i)&&(t=await this.refreshTokens({tokens:t,username:n}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const{signInDetails:n}=e,o=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return o.signInDetails=n,await this.setTokens({tokens:o}),S.dispatch("auth",{event:"tokenRefresh"},"Auth",m),o}catch(e){return this.handleErrors(e)}}handleErrors(e){if(ft(e),e.name!==o.NetworkError&&this.clearTokens(),S.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",m),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}const Qt=new class{constructor(){this.authTokenStore=new Ot,this.authTokenStore.setKeyValueStorage(y),this.tokenOrchestrator=new Jt,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(jt)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},{tokenOrchestrator:Yt}=Qt,Xt={configure(e,t){const n=K(e),o=new s({sameSite:"lax"}),i=t?.ssr?o:y,r=t?.ssr?new kt(new Nt(o)):Dt;if(n.Auth)if(t?.Auth)q.configure(n,t);else{if(!q.libraryOptions.Auth)return Qt.setAuthConfig(n.Auth),Qt.setKeyValueStorage(i),void q.configure(n,{...t,Auth:{tokenProvider:Qt,credentialsProvider:r}});if(t){const e=q.libraryOptions.Auth;return void 0!==t.ssr&&(Qt.setKeyValueStorage(i),e.credentialsProvider=r),void q.configure(n,{Auth:e,...t})}q.configure(n)}else q.configure(n,t)},getConfig:()=>q.getConfig()};window.aws_amplify=t,window.aws_amplify={}})();